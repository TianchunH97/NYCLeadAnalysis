[["data-transformation.html", "Chapter 3 Data transformation 3.1 Load data 3.2 Capitalize all borough names 3.3 Unify units of lead level 3.4 Concat two datasets", " Chapter 3 Data transformation 3.1 Load data Datasets are first downloaded as csv files and then read into R. free_residential &lt;- read.csv(&quot;Free_Residential_at-the-tap_Lead_and_Copper_Data.csv&quot;) compliance &lt;- read.csv(&quot;Compliance_at-the-tap_Lead_and_Copper_Data.csv&quot;) children_6_yrs &lt;- read.csv(&quot;Children_Under_6_yrs_with_Elevated_Blood_Lead_Levels__BLL_.csv&quot;) children_by_3 &lt;- read.csv(&quot;Children_Tested_for_Lead_by_Age_3.csv&quot;) 3.2 Capitalize all borough names In the two datasets for at-the-tap water test results, the &quot;Borough&quot; column contain both uppercase and lowercase strings while refering to the same borough, hence we transformed all rows of &quot;Borough&quot; column to be uppercase strings. free_residential$Borough &lt;- toupper(free_residential$Borough) compliance$Borough &lt;- toupper(compliance$Borough) 3.3 Unify units of lead level The units of at-the-tap lead level are different in two datasets. Hence, we transform the unit in &quot;compliance&quot; data from \\(\\mu g/l\\) to \\(mg/l\\). compliance$First.Draw.at.the.tap.Lead.level..µg.l. &lt;- 0.001 * compliance$First.Draw.at.the.tap.Lead.level..µg.l. colnames(compliance)[6] &lt;- &quot;First.Draw.at.the.tap.Lead.level..mg.l.&quot; 3.4 Concat two datasets Since two at-the-tap lead level datasets have many variables in common, we pick out their common columns and merge them to be a single large table. Meanwhile, we add an extra column to denote which dataset the observation is originally from. len_fr &lt;- length(free_residential$Kit.ID) len_cp &lt;- length(compliance$KIT.ID.Number) from_fr &lt;- c() for (i in 1:len_fr){ from_fr&lt;-c(from_fr,&quot;free residential&quot;) } free_residential$source &lt;- from_fr from_cp &lt;- c() for (i in 1:len_cp){ from_cp&lt;-c(from_cp,&quot;free residential&quot;) } compliance$source &lt;- from_cp colnames(free_residential)[c(1,2,3,4,5,6,9,12)] &lt;- colnames(compliance) merged_col &lt;- colnames(free_residential)[c(1,2,3,4,5,6,9,12)] at_the_tap_merged &lt;- rbind(compliance, free_residential[merged_col]) "]]
