<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Prevalence and Effects of Lead in NYC's Water System</title>
  <meta name="description" content="Chapter 3 Data transformation | Prevalence and Effects of Lead in NYC's Water System" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Prevalence and Effects of Lead in NYC's Water System" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Prevalence and Effects of Lead in NYC's Water System" />
  
  
  

<meta name="author" content="Tianchun Huang, Erdong Wang, Jiaxi Zhou" />


<meta name="date" content="2020-12-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYC Lead Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a><ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#free-residential-at-the-tap-lead-and-copper-data"><i class="fa fa-check"></i><b>2.1</b> Free Residential at-the-tap Lead and Copper Data</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#compliance-at-the-tap-lead-and-copper-data"><i class="fa fa-check"></i><b>2.2</b> Compliance at-the-tap Lead and Copper Data</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#children-tested-for-lead-by-age-3"><i class="fa fa-check"></i><b>2.3</b> Children Tested for Lead by Age 3</a></li>
<li class="chapter" data-level="2.4" data-path="data-sources.html"><a href="data-sources.html#children-under-6-yrs-with-elevated-blood-lead-levels-bll"><i class="fa fa-check"></i><b>2.4</b> Children Under 6 yrs with Elevated Blood Lead Levels (BLL)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#data-loading-and-cleaning"><i class="fa fa-check"></i><b>3.1</b> Data loading and cleaning</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#data-preprocessing"><i class="fa fa-check"></i><b>3.2</b> Data preprocessing</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#compute-ratio-of-samples-exceeding-safety-threshold-and-group-by-zipcode"><i class="fa fa-check"></i><b>3.3</b> Compute ratio of samples exceeding safety threshold and group by zipcode</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#join-at-the-tap-water-data-and-children-data"><i class="fa fa-check"></i><b>3.4</b> Join at-the-tap water data and children data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#how-prevalent-is-lead-in-nyc-water-system"><i class="fa fa-check"></i><b>5.1</b> How prevalent is lead in NYC water system?</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#how-are-children-in-nyc-affected-by-lead-poisoning"><i class="fa fa-check"></i><b>5.2</b> How are children in NYC affected by lead poisoning?</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Prevalence and Effects of Lead in NYC's Water System</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="data-loading-and-cleaning" class="section level2">
<h2><span class="header-section-number">3.1</span> Data loading and cleaning</h2>
<p>Datasets are first downloaded as csv files and then read into R.</p>
<p>In the two datasets for at-the-tap water test results, the &quot;Borough&quot; column contain both uppercase and lowercase strings while refering to the same borough, hence we transformed all rows of &quot;Borough&quot; column to be uppercase strings.</p>
<p>The units of at-the-tap lead level are different in two datasets. Hence, we transform the unit in &quot;compliance&quot; data from <span class="math inline">\(\mu g/l\)</span> to <span class="math inline">\(mg/l\)</span>.</p>
</div>
<div id="data-preprocessing" class="section level2">
<h2><span class="header-section-number">3.2</span> Data preprocessing</h2>
<p>Since two at-the-tap lead level datasets have many variables in common, we pick out their common columns and merge them to be a single large table. Meanwhile, we add an extra column to denote which dataset the observation is originally from.</p>
</div>
<div id="compute-ratio-of-samples-exceeding-safety-threshold-and-group-by-zipcode" class="section level2">
<h2><span class="header-section-number">3.3</span> Compute ratio of samples exceeding safety threshold and group by zipcode</h2>
<p>According to United States Environmental Protection Agency (EPA), a lead level over 0.015 mg/L is unsafe for human body. Hence, we add a binary label to show the safety status of the water sample and calculate the rate of having unsafe samples in each area.</p>
</div>
<div id="join-at-the-tap-water-data-and-children-data" class="section level2">
<h2><span class="header-section-number">3.4</span> Join at-the-tap water data and children data</h2>
<p>Since the water dataset contains zipcode information and the children data contains name of the neighbourhoods, we make a dictionary by looking up the zipcodes on official websites and join the two datasets using the dictionary. In this way, we are able to explore the relationship between the rate of having unsafe water samples and the rate of having unhealthy children blood samples.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/TianchunH97/NYCLeadAnalysis/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/TianchunH97/NYCLeadAnalysis/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
